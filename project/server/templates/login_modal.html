<!-- Модальное окно для входа и регистрации -->
<div class="modal fade" id="authModal" tabindex="-1" aria-labelledby="authModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="authModalLabel">Вхід до аккаунту</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <!-- Форма входа -->
                <form id="loginForm" class="needs-validation" method="POST" novalidate>
                    {{ login_form.hidden_tag() }}
                    <div class="form-group">
                        <label for="loginEmail">Ім'я</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupPrepend">
                                    <i class="fa fa-envelope" aria-hidden="true"></i>
                                </span>
                            </div>
                            {{ login_form.email(class_='form-control', id='loginEmail', placeholder="Ім'я") }}
                            <div class="invalid-feedback">
                                Введіть правильний email: ex@abc.xyz
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Пароль</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupPrepend">
                                    <i class="fa fa-lock" aria-hidden="true"></i>
                                </span>
                            </div>
                            {{ login_form.password(class_='form-control', id='loginPassword', placeholder='Пароль') }}
                            <div class="invalid-feedback">
                                Введіть пароль
                            </div>
                        </div>
                    </div>
                    {{ login_form.submit(class_='btn btn-primary btn-block') }}
                </form>

                <!-- Форма регистрации -->
                <form id="registerForm" class="needs-validation" method="POST" novalidate style="display: none;">
                    {{ register_form.hidden_tag() }}
                    <div class="form-group">
                        <label for="registerEmail">Ім'я</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupPrepend">
                                    <i class="fa fa-envelope" aria-hidden="true"></i>
                                </span>
                            </div>
                            {{ register_form.email(class_='form-control', id='registerEmail', placeholder="Ім'я") }}
                            <div class="invalid-feedback">
                                Введіть правильний email: ex@abc.xyz
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Пароль</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupPrepend">
                                    <i class="fa fa-lock" aria-hidden="true"></i>
                                </span>
                            </div>
                            {{ register_form.password(class_='form-control', id='registerPassword', placeholder='Пароль') }}
                            <div class="invalid-feedback">
                                Введіть пароль
                            </div>
                        </div>
                    </div>
                    {{ register_form.submit(class_='btn btn-primary btn-block') }}
                </form>

                <div class="text-center mt-3">
                    <a href="#" id="toggleAuthForms">Реєстрація</a>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    // Bootstrap validation script
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            var forms = document.getElementsByClassName('needs-validation');
            var validation = Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();

    // Toggle between login and registration forms
    document.getElementById('toggleAuthForms').addEventListener('click', function(event) {
        event.preventDefault();
        var loginForm = document.getElementById('loginForm');
        var registerForm = document.getElementById('registerForm');
        var authModalLabel = document.getElementById('authModalLabel');
        if (loginForm.style.display === 'none') {
            loginForm.style.display = 'block';
            registerForm.style.display = 'none';
            authModalLabel.textContent = 'Вхід до аккаунту';
            this.textContent = 'Реєстрація';
        } else {
            loginForm.style.display = 'none';
            registerForm.style.display = 'block';
            authModalLabel.textContent = 'Реєстрація';
            this.textContent = 'Вхід до аккаунту';
        }
    });
</script>