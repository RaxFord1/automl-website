{% extends 'base.html' %}

{% block content %}

    {% include 'login_modal.html' %}

    <div class="main_container">
        <div class="dataset__info__container">
            <div class="dataset__info">
                Будь ласка. Оберіть свій датасет! Пам'ятайте, що датасет повинен бути у відповідному форматі. У
                ньому повинне бути поле label -
                значення, яке ви хочете, щоб модель навчилась інтерполювати. Всі остальні значеняя повинні бути у
                форматі
                float32 від 0 до 1
            </div>
        </div>
        <div class="dataset__tabliza">
            <table border="1" class="dataset__table">
                <thead>
                <tr class="tabliza__mainTitle">
                    <th colspan="5">Ваші датасети:</th>
                </tr>
                <tr>
                    <td>Назва</td>
                    <td>Розмір</td>
                    <td>shape</td>
                    <td>Дата створення</td>
                    <td></td>
                </tr>
                </thead>

                <tr>
                    <td>....</td>
                    <td>....</td>
                    <td>....</td>
                    <td>....</td>
                    <td>
                        <button onclick="show_add_dataset_form()">Додати</button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <script src="{{ url_for('static', filename= 'js/load_datasets.js') }}"></script>


    <div class="add_dataset_form" style="display: none">


        <div id="input">
            <form class="dataset_form_container validate-form" id="add_datasetForm" style="margin:auto;"
                  action="/__add_dataset" method="post" enctype="multipart/form-data">
                <input type="hidden" name="dataset_email" value="">
                <span class="dataset_form_title">
                Введіть
            </span>
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="basic-addon3">dataset name</span>
                    </div>
                    <input type="text" class="form-control" id="dataset_name" aria-describedby="basic-addon3"
                           name="dataset_name">
                </div>
                <hr>
                <div class="dataset_type">
                    <p><b>Выберите тип задачи</b></p>
                    <input type="radio" class="btn-check" name="radio_task_type" id="option1" disabled="disabled">
                    <label class="btn btn-secondary" for="option1"> Регрессія</label>

                    <input type="radio" class="btn-check" name="radio_task_type" id="option2" checked="checked">
                    <label class="btn btn-secondary" for="option2"> Классифікація</label>
                </div>

                <hr>
                <div class="form-group load_dataset">
                    <label for="exampleFormControlFile1">Завантажте csv файл</label>
                    <input name="file_upload" type="file" class="form-control-file" id="file_upload" accept=".csv">
                </div>

                <hr>
                <h4 style="color: red">Зверніть увагу, що вам потрібно вказати колонку з предиктором, як "target", або
                    "label". Інакше процесс
                    навчання не почнеться. Та тип потрібен бути int від 0 до нескінченності.</h4>

                <hr>

                <button type="submit" class="btn btn-secondary button_dataset_load">Завантажити</button>
                <div class="dataset_result"></div>
            </form>
        </div>
    </div>

    <div class="dataset_form" style="display: none;">
        <div id="input">
            <div class="dataset_form_container validate-form" id="myForm" style="margin:auto;">
            <span class="dataset_form_title">
                {{ dataset_name | default("Назва датасету", true) }}
            </span>
                <div class="dataset_type">
                    <input type="radio" class="btn-check task_type_regression" name="task_type" id="option1"
                           autocomplete="off" disabled="disabled">
                    <label class="btn btn-secondary" for="option1"> Регрессія</label>

                    <input type="radio" class="btn-check task_type_classification" name="task_type" id="option2"
                           autocomplete="off" checked="checked">
                    <label class="btn btn-secondary" for="option2"> Классифікація</label>
                </div>


                <div class="dataset_table_container">
                    <script>
                        var _table = {{ dataset_table_info | default("null", true) }};
                        if (_table != null) {
                            $(".dataset_table_container").html(_table);
                        } else {
                            $(".dataset_table_container").html("<table><thead><tr><th scope='col'>#</th><th scope='col'>col_0</th><th scope='col'>col_1</th><th scope='col'>col_2</th><th scope='col'>col_3</th><th scope='col'>col_4</th></tr></thead><tbody><tr><th scope='row'>1</th><td>Нулевая фича</td><td>Первая фича</td><td>Вторая фича</td><td>Третья фича</td><td>Четвёртая фича</td></tr></tbody></table>");
                        }
                    </script>

                    <!--print(crushed_visitor.to_html())-->
                </div>
                <div class="dataset_shape">
                    Shape:
                    <div class="dataset_shape_value">(0,)</div>

                </div>
                <!--<button>Редактировать</button>-->
                <form class="select_model" id="datasetForm" style="margin:auto;"
                      action="/train_model" method="post">
                    <div class="Choose size">
                        Оберіть максимальный розмір моделі
                        <select class="form-select" aria-label="Default select example" name="model_size">
                            <option value="1" selected>Маленька</option>
                            <option value="2">Средня</option>
                            <option value="3">Велика</option>
                        </select>
                    </div>
                    <div>
                        <input name="dataset_name_hidden" value="" type="text" hidden/>
                        <input type="hidden" name="dataset_email" value="">
                    </div>
                    <button type="submit" class="btn btn-secondary button_dataset_load">Тренувати</button>
                    <button type="button" class="btn btn-secondary button_dataset_delete" onclick="delete_dataset()">
                        Видалити
                    </button>


                </form>


                <div class="result"></div>
            </div>
        </div>
    </div>
    </div>

{% endblock %}